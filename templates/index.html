<!DOCTYPE html>
<html>
<head>
  <title>Token Cost Calculator</title>
  <style>
    header, footer {
      background-color: #f1f1f1;
      padding: 10px;
      text-align: center;
      font-size: 24px;
    }
    .form-container .response-table-container {
      width: 50%;
      margin: 0 auto;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 8px;
    }
    input[type="text"]
    {
      width: 100%; 
      padding: 100px; /* Increased padding for larger height */
      margin-bottom: 8px;
      box-sizing: border-box;
      font-size: 16px; /* Larger font size */
    }
    select {
      width: 100%; /* Make input fields full width of the form container */
      padding: 8px;
      margin-bottom: 8px;
      box-sizing: border-box;
    }
    .button-container {
      display: flex;
      justify-content: center;
      margin-top: 8px;
      margin-bottom: 20px; /* Increased space below the button */
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    th {
      text-align: center; /* Center the table headers */
    }
  </style>
</head>
<body>
  <header>Prompt Token Cost Calculator</header>
  
  <div class="form-container">
    <form>
      <label for="text">Enter prompt:</label>
      <input type="text" id="text" required>
      
      <label for="model">Choose a model:</label>
      <select id="model" required>
        <option value="">Select a model</option>
        <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
        <option value="model2">Model 2</option>
        <option value="model3">Model 3</option>
      </select>

      <div class="button-container">
        <button type="submit">Submit</button>
      </div>
    </form>
  </div>
  <div class="response-table-container">
    <div id="table-container"></div>
    <script>
      // JavaScript code to call the API with the text and model in the request body
      // Replace 'yourApiUrl' with the actual API URL
      const apiUrl = 'http://127.0.0.1:5000/api/token-cost-utility';
      const textInput = document.getElementById('text');
      const modelSelect = document.getElementById('model');
      const tableContainer = document.getElementById('table-container');


      function submitForm(event) {
        event.preventDefault(); // Prevent default form submission
        const requestBody = {
          prompt: textInput.value,
          model: modelSelect.value
        };

        fetch(apiUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(requestBody)
        })
          .then(response => response.json())
          .then(data => {
            const table = `<table>
                        <tr>
                          <th>Model</th>
                          <th>Prompt Cost in TPU</th>
                          <th>Prompt Cost in USD</th>
                        </tr>
                        <tr>
                          <td>${data.response.model}</td>
                          <td>${data.response.prompt_cost}</td>
                          <td>${data.response.prompt_cost_in_usd}</td>
                        </tr>
                      </table>`;
            tableContainer.innerHTML = table;
          })
          .catch(error => {
            console.error(error);
            responseDiv.textContent = 'Error: ' + error; // Display errors
          });
      }
      document.querySelector('form').addEventListener('submit', submitForm);
    </script>
  </div>
</body>
</html>
